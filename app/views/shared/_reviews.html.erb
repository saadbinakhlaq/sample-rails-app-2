<div>
  <h5>Reviews</h5>
  <div class="row align-items-center">
    <div class="col-6 text-center">
      <p>Average User Rating</p>
      <span class="fs-1"><%= average_rating %></span><span>/5</span>
    </div>
    <div class="col-6">
      <div class="row align-items-center">
        <div class="col-2">
          <span>5 <i class="fas fa-star"></i></span>
        </div>
        <div class="col-10">
          <div class="progress">
            <div class="progress-bar bg-success" role="progressbar" style="width: <%= calculate_percentage(five_rating_count, review_count) %>%" aria-valuenow="<%= five_rating_count %>" aria-valuemin="0" aria-valuemax="<%= review_count %>"><%= five_rating_count %></div>
          </div>
        </div>
      </div>
      <div class="row align-items-center">
        <div class="col-2">
          <span>4 <i class="fas fa-star"></i></span>
        </div>
        <div class="col-10">
          <div class="progress">
            <div class="progress-bar bg-info" role="progressbar" style="width: <%= calculate_percentage(four_rating_count, review_count) %>%" aria-valuenow="<%= four_rating_count %>" aria-valuemin="0" aria-valuemax="<%= review_count %>"><%= four_rating_count %></div>
          </div>
        </div>
      </div>
      <div class="row align-items-center">
        <div class="col-2">
          <span>3 <i class="fas fa-star"></i></span>
        </div>
        <div class="col-10">
          <div class="progress">
            <div class="progress-bar" role="progressbar" style="width: <%= calculate_percentage(three_rating_count, review_count) %>%" aria-valuenow="<%= three_rating_count %>" aria-valuemin="0" aria-valuemax="<%= review_count %>"><%= three_rating_count %></div>
          </div>
        </div>
      </div>
      <div class="row align-items-center">
        <div class="col-2">
          <span>2 <i class="fas fa-star"></i></span>
        </div>
        <div class="col-10">
          <div class="progress">
            <div class="progress-bar bg-warning" role="progressbar" style="width: <%= calculate_percentage(two_rating_count, review_count) %>%" aria-valuenow="<%= two_rating_count %>" aria-valuemin="0" aria-valuemax="<%= review_count %>"><%= two_rating_count %></div>
          </div>
        </div>
      </div>
      <div class="row align-items-center">
        <div class="col-2">
          <span>1 <i class="fas fa-star"></i></span>
        </div>
        <div class="col-10">
          <div class="progress mb-2">
            <div class="progress-bar bg-danger" role="progressbar" style="width: <%= calculate_percentage(one_rating_count, review_count) %>%" aria-valuenow="<%= one_rating_count %>" aria-valuemin="0" aria-valuemax="<%= review_count %>"><%= one_rating_count %></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row mt-3">
    <% reviews.each do |review| %>
      <div class="card mb-3">
        <div class="row g-0">
          <div class="col-md-4 p-3">
            <p class="card-text"><small class="text-muted"><%= review.account.name %></small></p>
            <p class="card-text"><small class="text-muted"><%= review.created_at %></small></p>
          </div>
          <div class="col-md-8">
            <div class="card-body">
              <h5 class="card-title"><%= render "shared/ratings", rating_count: review.rating, review_count: 0 %></h5>
              <p class="card-text"><%= review.comment %></p>
            </div>
          </div>
        </div>
      </div>
    <% end %>
    <%= paginate reviews, theme: "bootstrap-5", pagination_class: "pagination-sm flex-wrap justify-content-center" %>
  </div>
</div>
